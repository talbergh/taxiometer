<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#18181b">
  <meta name="description" content="TaxiOMeter - Professional taxi fare calculator">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="assets/images/icon-192.png">
  <link rel="apple-touch-icon" href="assets/images/icon-192.png">
  <link rel="stylesheet" href="assets/stylesheets/app.css">
  <link rel="stylesheet" href="assets/stylesheets/leaflet.min.css">
  <link rel="stylesheet" href="assets/stylesheets/fontawesome.min.css">
  <script src="assets/javascripts/fontawesome.min.js" defer></script>
  <script src="assets/javascripts/leaflet.min.js"></script>
  <script src="assets/javascripts/jquery.min.js"></script>
  <script src="assets/javascripts/qrcode.min.js"></script>
  <title>TaxiOMeter</title>
</head>
<body>
  <!-- Onboarding -->
  <div class="onboarding-container">
    <div class="onboarding-step active">
      <div class="onboarding-icon">
        <img src="assets/images/welcome.svg" alt="Welcome" width="120" height="120">
      </div>
      <h1 class="onboarding-title" data-i18n="welcome">Willkommen</h1>
      <p class="onboarding-description" data-i18n="welcomeDesc">TaxiOMeter hilft Ihnen bei der präzisen Fahrpreisberechnung mit GPS-Tracking.</p>
      <div class="progress-dots">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <button class="btn" id="onboarding-next-1" data-i18n="next">Weiter</button>
    </div>
    
    <div class="onboarding-step">
      <div class="onboarding-icon">
        <img src="assets/images/personal_data.svg" alt="Privacy" width="120" height="120">
      </div>
      <h1 class="onboarding-title" data-i18n="privacy">Datenschutz</h1>
      <p class="onboarding-description" data-i18n="privacyDesc">Ihre Privatsphäre ist uns wichtig. Alle Daten werden nur lokal auf Ihrem Gerät gespeichert. Es werden keine Daten an externe Server übertragen oder gesammelt.</p>
      <div class="progress-dots">
        <div class="dot active"></div>
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>
      <button class="btn" id="onboarding-next-2" data-i18n="next">Weiter</button>
    </div>
    
    <div class="onboarding-step">
      <div class="onboarding-icon">
        <img src="assets/images/gps.svg" alt="Location" width="120" height="120">
      </div>
      <h1 class="onboarding-title" data-i18n="location">Standort</h1>
      <p class="onboarding-description" data-i18n="locationDesc">Für genaue Berechnungen benötigen wir Zugriff auf Ihren Standort.</p>
      <div class="progress-dots">
        <div class="dot active"></div>
        <div class="dot active"></div>
        <div class="dot active"></div>
        <div class="dot"></div>
      </div>
      <button class="btn" id="onboarding-location" data-i18n="allowLocation">Standort erlauben</button>
    </div>
    
    <div class="onboarding-step">
      <div class="onboarding-icon">
        <img src="assets/images/earn.svg" alt="Setup" width="120" height="120">
      </div>
      <h1 class="onboarding-title" data-i18n="setup">Einrichtung</h1>
      <p class="onboarding-description" data-i18n="setupDesc">Bitte geben Sie Ihren Namen ein. Dieser erscheint auf den Quittungen für Ihre Fahrgäste.</p>
      <div class="input-group">
        <input type="text" id="driver-name" placeholder="Ihr Name" required>
      </div>
      <div class="progress-dots">
        <div class="dot active"></div>
        <div class="dot active"></div>
        <div class="dot active"></div>
        <div class="dot active"></div>
      </div>
      <button class="btn" id="onboarding-complete" data-i18n="getStarted">Los geht's</button>
    </div>
  </div>

  <!-- Main App -->
  <div class="app-container">
    <main class="app-content">
      <!-- Home Screen -->
      <div class="screen active" id="home">
        <div class="map-container">
          <div id="map"></div>
          <button class="btn map-start-btn" id="start-new-ride" data-i18n="newRide">Neue Fahrt starten</button>
        </div>
      </div>
      
      <!-- Start Ride Screen -->
      <div class="screen" id="start-ride">
        <div class="card">
          <h2 data-i18n="startRide">Fahrt starten</h2>
          
          <div class="input-group">
            <label for="ride-name" data-i18n="rideName">Fahrname (optional)</label>
            <input type="text" id="ride-name" data-i18n="rideName">
          </div>
          
          <div class="input-group">
            <label for="destination" data-i18n="destination">Zieladresse</label>
            <input type="text" id="destination" data-i18n="destination" autocomplete="off">
            <div id="address-suggestions" class="address-suggestions"></div>
          </div>
          
          <div class="input-group">
            <label for="discount-type" data-i18n="discount">Rabatt</label>
            <select id="discount-type">
              <option value="none">Kein Rabatt</option>
              <option value="percent" data-i18n="discountPercent">Prozent (%)</option>
              <option value="amount" data-i18n="discountAmount">Betrag (€)</option>
            </select>
            <input type="number" id="discount-value" min="0" step="0.01" placeholder="0">
          </div>
          
          <div class="btn-group">
            <button class="btn success" id="start-ride-btn" data-i18n="start">Starten</button>
            <button class="btn secondary" id="cancel-ride-btn" data-i18n="cancel">Abbrechen</button>
          </div>
        </div>
      </div>
      
      <!-- End Ride Screen -->
      <div class="screen" id="end-ride">
        <div class="card">
          <h2 data-i18n="rideComplete">Fahrt beendet</h2>
          
          <div style="text-align: center; margin: 2rem 0;">
            <div style="font-size: 3rem; font-weight: bold; color: var(--accent);">
              <span id="current-fare">0.00</span>€
            </div>
            <div style="font-size: 1.1rem; color: var(--text-secondary); margin-top: 0.5rem;">
              <span id="current-distance">0.00</span> km • <span id="current-duration">0</span> min
            </div>
          </div>
          
          <div class="qr-container" id="qr-code"></div>
          
          <div class="btn-group">
            <button class="btn" id="share-receipt-btn" data-i18n="shareReceipt">Quittung teilen</button>
            <button class="btn secondary" onclick="window.app.resetRide()" data-i18n="next">Okay</button>
          </div>
        </div>
      </div>
      
      <!-- History Screen -->
      <div class="screen" id="history">
        <div id="history-list">
          <!-- History items will be loaded here -->
        </div>
      </div>
      
      <!-- Settings Screen -->
      <div class="screen" id="settings">
        <div class="settings-tabs">
          <div class="tab-buttons">
            <button class="tab-btn active" data-tab="general">Allgemein</button>
            <button class="tab-btn" data-tab="libraries">Bibliotheken</button>
          </div>
          
          <div class="tab-content active" id="general-tab">
            <div class="card">
              <h2 data-i18n="settings">Einstellungen</h2>
              
              <div class="input-group">
                <label for="language-select" data-i18n="language">Sprache</label>
                <select id="language-select">
                  <option value="de">Deutsch</option>
                  <option value="en">English</option>
                </select>
              </div>
              
              <div class="input-group">
                <label for="price-per-km" data-i18n="pricePerKm">Preis pro Kilometer</label>
                <input type="number" id="price-per-km" min="0" step="0.01" value="1.50">
              </div>
              
              <div class="input-group">
                <label for="base-fare" data-i18n="baseFare">Grundgebühr</label>
                <input type="number" id="base-fare" min="0" step="0.01" value="3.00">
              </div>
              
              <div class="input-group">
                <label for="driver-name-setting" data-i18n="driverName">Fahrername</label>
                <input type="text" id="driver-name-setting" placeholder="Ihr Name">
              </div>
            </div>
          </div>
          
          <div class="tab-content" id="libraries-tab">
            <div class="card">
              <h2>Verwendete Bibliotheken</h2>
              <div class="libraries-list">
                <div class="library-item">
                  <h3>Leaflet.js</h3>
                  <p>Version: 1.9.4</p>
                  <p>Interactive maps for the web</p>
                  <a href="https://leafletjs.com/" target="_blank">leafletjs.com</a>
                </div>
                
                <div class="library-item">
                  <h3>QRCode.js</h3>
                  <p>Version: Local</p>
                  <p>QR code generation library</p>
                  <a href="https://davidshimjs.github.io/qrcodejs/" target="_blank">davidshimjs.github.io/qrcodejs</a>
                </div>
                
                <div class="library-item">
                  <h3>jQuery</h3>
                  <p>Version: 3.7.1</p>
                  <p>Fast, small, and feature-rich JavaScript library</p>
                  <a href="https://jquery.com/" target="_blank">jquery.com</a>
                </div>
                
                <div class="library-item">
                  <h3>Font Awesome</h3>
                  <p>Version: 7.0.1</p>
                  <p>Icon library and toolkit</p>
                  <a href="https://fontawesome.com/" target="_blank">fontawesome.com</a>
                </div>
                
                <div class="library-item">
                  <h3>OpenStreetMap Nominatim</h3>
                  <p>Address geocoding service</p>
                  <p>Free address search API</p>
                  <a href="https://nominatim.openstreetmap.org/" target="_blank">nominatim.openstreetmap.org</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <div class="nav-item active" data-screen="home">
        <i class="fas fa-map"></i>
        <span data-i18n="home">Karte</span>
      </div>
      <div class="nav-item" data-screen="history">
        <i class="fas fa-clock-rotate-left"></i>
        <span data-i18n="history">Verlauf</span>
      </div>
      <div class="nav-item" data-screen="settings">
        <i class="fas fa-gear"></i>
        <span data-i18n="settings">Einstellungen</span>
      </div>
    </nav>
  </div>
  
  <script type="module" src="assets/javascripts/app.js"></script>
</body>
</html>
